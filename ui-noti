-- LocalScript (StarterPlayerScripts)

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local sendWebhook = ReplicatedStorage:WaitForChild("SendWebhook")

-- GUI Setup
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "InfoGui"
screenGui.ResetOnSpawn = false

local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 500, 0, 100)
frame.Position = UDim2.new(0.5, -250, 0.05, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BackgroundTransparency = 0.3
frame.BorderColor3 = Color3.fromRGB(255, 182, 193)
frame.BorderSizePixel = 1

local corner = Instance.new("UICorner", frame)
corner.CornerRadius = UDim.new(0, 8)

local infoLabel = Instance.new("TextLabel", frame)
infoLabel.Size = UDim2.new(1, -10, 0.4, 0)
infoLabel.Position = UDim2.new(0, 5, 0, 0)
infoLabel.BackgroundTransparency = 1
infoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
infoLabel.Font = Enum.Font.SourceSansBold
infoLabel.TextScaled = true
infoLabel.Text = "Loading..."

local textBox = Instance.new("TextBox", frame)
textBox.Size = UDim2.new(0.7, -10, 0.3, 0)
textBox.Position = UDim2.new(0, 5, 0.5, 5)
textBox.PlaceholderText = "Paste your Discord Webhook here..."
textBox.TextScaled = true
textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
textBox.Font = Enum.Font.SourceSans
textBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

local sendButton = Instance.new("TextButton", frame)
sendButton.Size = UDim2.new(0.25, 0, 0.3, 0)
sendButton.Position = UDim2.new(0.73, 0, 0.5, 5)
sendButton.Text = "Send"
sendButton.TextScaled = true
sendButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
sendButton.Font = Enum.Font.SourceSansBold
sendButton.TextColor3 = Color3.fromRGB(255, 255, 255)

-- Time tracking
local startTime = tick()
local frames = 0
local fps = 0
local lastUpdate = tick()

RunService.RenderStepped:Connect(function()
	frames += 1
	local now = tick()
	if now - lastUpdate >= 1 then
		fps = frames
		frames = 0
		lastUpdate = now
	end

	local elapsed = now - startTime
	local minutes = math.floor(elapsed / 60)
	local seconds = math.floor(elapsed % 60)

	infoLabel.Text = string.format("Username: %s    Time: %dm %02ds    FPS: %d", player.Name, minutes, seconds, fps)
end)

sendButton.MouseButton1Click:Connect(function()
	local url = textBox.Text
	if url ~= "" then
		local elapsed = tick() - startTime
		local timeString = string.format("%dm %02ds", math.floor(elapsed / 60), math.floor(elapsed % 60))
		sendWebhook:FireServer(player.Name, timeString, fps, url)
	end
end)
